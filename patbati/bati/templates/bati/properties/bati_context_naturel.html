{% load mapentity_tags common_tags %}

<!-- Collapsible card for Contexte naturel -->
<div class="content mb-3">
  <div class="card">
    <div class="card-header text-center d-flex justify-content-between align-items-center"
        data-toggle="collapse"
        data-target="#collapseNaturel"
        aria-expanded="false"
        aria-controls="collapseNaturel"
        style="cursor:pointer; position: relative;">
      <span>Contexte naturel</span>
      <span class="chevron-icon"><i class="bi bi-chevron-down"></i></span>
    </div>
    <div id="collapseNaturel" class="collapse">
      <div class="card-body p-0">
        <table class="table table-striped table-bordered mb-0">
          <tbody>
            <tr>
              <th>Risques naturels</th>
              <td>
                  {% for risque in object.risques_nat.all %}
                  {{ risque.label }}{% if not forloop.last %}, {% endif %}
                  {% empty %}
                  Aucun risque naturel
                  {% endfor %}
              </td>
            </tr>
            <tr>
              <th>Remarque risque naturel</th>
              <td>{{ object.remarque_risque|default:"-" }}</td>
            </tr>
            <tr>
              <th>Masques</th>
              <td>
                {% for masque in object.masques.all %}
                {{ masque.label }}{% if not forloop.last %}, {% endif %}
                {% empty %}
                Aucun masque
                {% endfor %}
              </td>
            </tr>
            <tr>
              <th>Commentaire Masque</th>
              <td>{{ object.commentaire_masque|default:"-" }}</td>
            </tr>
            <tr>
              <th>Remarque générale</th>
              <td>{{ object.remarque_generale|default:"-" }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>